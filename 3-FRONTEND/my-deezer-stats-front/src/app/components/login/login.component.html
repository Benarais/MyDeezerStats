<div class="dashboard-container login-page">
  <section class="section">
    <h2><i class="fas {{ isSignUp ? 'fa-user-plus' : 'fa-sign-in-alt' }}"></i> 
      {{ isSignUp ? 'Créer un compte' : 'Connexion' }}
    </h2>

    <form (ngSubmit)="isSignUp ? signUp() : login()" #authForm="ngForm" class="login-form">
      <!-- Champ Email -->
      <div class="form-group">
        <label for="email">Email</label>
        <input
          id="email"
          name="email"
          type="email"
          [(ngModel)]="email"
          required
          email
          placeholder="votre@email.com"
          [class.invalid]="authForm.submitted && authForm.controls['email'].invalid"
        >
        <div *ngIf="authForm.submitted && authForm.controls['email'].errors" class="validation-error">
          <span *ngIf="authForm.controls['email'].errors['required']">Email requis</span>
          <span *ngIf="authForm.controls['email'].errors['email']">Format email invalide</span>
        </div>
      </div>

      <!-- Champ Mot de passe -->
      <div class="form-group">
        <label for="password">Mot de passe</label>
        <input
          id="password"
          name="password"
          type="password"
          [(ngModel)]="password"
          required
          minlength="6"
          placeholder="••••••"
          [class.invalid]="authForm.submitted && authForm.controls['password'].invalid"
        >
        <div *ngIf="authForm.submitted && authForm.controls['password'].errors" class="validation-error">
          <span *ngIf="authForm.controls['password'].errors['required']">Mot de passe requis</span>
          <span *ngIf="authForm.controls['password'].errors['minlength']">6 caractères minimum</span>
        </div>
      </div>

      <!-- Message d'erreur global -->
      <div *ngIf="errorMessage" class="error-message">
        <i class="fas fa-exclamation-circle"></i> {{ errorMessage }}
      </div>

      <!-- Bouton de soumission -->
      <button type="submit" [disabled]="isLoading" class="submit-btn">
        <span *ngIf="!isLoading">{{ isSignUp ? 'Créer le compte' : 'Se connecter' }}</span>
        <span *ngIf="isLoading">
          <span class="spinner"></span> {{ isSignUp ? 'Création...' : 'Connexion...' }}
        </span>
      </button>

      <!-- Lien pour basculer entre connexion et création de compte -->
      <div class="footer-links">
        <a (click)="toggleAuthMode()">
          {{ isSignUp ? 'Déjà un compte ? Se connecter' : 'Pas encore de compte ? Créer un compte' }}
        </a>
      </div>
    </form>
  </section>
</div>